<html>
<head>
	<title>Lesson 2</title>
<script type="text/javascript">

class EventEmitter{

    constructor(){
        this.events = {}
    }

    on(key, cb){
     	if (this.events[key]){
            this.events[key].push(cb)
        }else{
            this.events[key] = [cb]
        }
    }
    emit(key){
    	if(this.events[key]){
            this.events[key].forEach(cb => {
                cb(key)
            })
        }
    }   
    off(key){
    	if (this.events[key]){
            delete this.events[key]    
        }
    }
}

class Movie extends EventEmitter{

    constructor(title, year, duration){
        super();
        this._title = title;
        this.year = year;
        this.duration = duration;
        this.actors = {};
    }

    play(){
        this.emit("play");
    }
    pause(){
        this.emit("pause");  
    }
    resume(){
        this.emit("pause");
    }
    addCast(actors){
        console.log(actors);
        this.actors = actors;
    }
}

class Logger{
    log(text){
        console.log("The "+text+" event has been emitted")
    }
}

let social = {
    share: function(fn){
        console.log("Share "+this._title+" with "+fn);
    }, 
    like: function(fn){
        console.log(fn+" like "+this._title);
    },
};

class Actor{

    constructor(name,age){
        this.name = name;
        this.age = age;
    }
}



let terminator = new Movie("terminator",90,1995);
let logger = new Logger();
let arnold = new Actor('Arnold Schwarzenegger', 50);
terminator.on('play', logger.log);
terminator.play();
terminator.off('play');
terminator.play();

/////////

Object.assign(terminator,social);
terminator.like("Juan Araneta");
let otherCast = [
  new Actor('Paul Winfield', 50),
  new Actor('Michael Biehn', 50),
  new Actor('Linda Hamilton', 50)
];
terminator.addCast(otherCast);
terminator.addCast(arnold);
console.log(terminator);

</script>
</head>
<body>

</body>
</html>